<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ovonts Tracking kit</title>
  <link rel="stylesheet" href="style.css">
  <script>
    // example.com/productID=12345?campaignId=54321&affiliateId=98765
    //configure the SDK

    (function (t) {
      window.mParticle = window.mParticle || {};
      window.mParticle.EventType = {
        Unknown: 0,
        Navigation: 1,
        Location: 2,
        Search: 3,
        Transaction: 4,
        UserContent: 5,
        UserPreference: 6,
        Social: 7,
        Other: 8,
      };
      window.mParticle.eCommerce = { Cart: {} };
      window.mParticle.Identity = {};
      window.mParticle.config = window.mParticle.config || {};
      window.mParticle.config.rq = [];
      window.mParticle.config.snippetVersion = 2.3;
      window.mParticle.ready = function (t) {
        window.mParticle.config.rq.push(t);
      };
      var e = [
        "endSession",
        "logError",
        "logBaseEvent",
        "logEvent",
        "logForm",
        "logLink",
        "logPageView",
        "setSessionAttribute",
        "setAppName",
        "setAppVersion",
        "setOptOut",
        "setPosition",
        "startNewSession",
        "startTrackingLocation",
        "stopTrackingLocation",
      ];
      var o = ["setCurrencyCode", "logCheckout"];
      var i = ["identify", "login", "logout", "modify"];
      e.forEach(function (t) {
        window.mParticle[t] = n(t);
      });
      o.forEach(function (t) {
        window.mParticle.eCommerce[t] = n(t, "eCommerce");
      });
      i.forEach(function (t) {
        window.mParticle.Identity[t] = n(t, "Identity");
      });
      function n(e, o) {
        return function () {
          if (o) {
            e = o + "." + e;
          }
          var t = Array.prototype.slice.call(arguments);
          t.unshift(e);
          window.mParticle.config.rq.push(t);
        };
      }
      var dpId,
        dpV,
        config = window.mParticle.config,
        env = config.isDevelopmentMode ? 1 : 0,
        dbUrl = "?env=" + env,
        dataPlan = window.mParticle.config.dataPlan;
      dataPlan &&
        ((dpId = dataPlan.planId),
          (dpV = dataPlan.planVersion),
          dpId &&
          (dpV && (dpV < 1 || dpV > 1e3) && (dpV = null),
            (dbUrl +=
              "&plan_id=" + dpId + (dpV ? "&plan_version=" + dpV : ""))));
      var mp = document.createElement("script");
      mp.type = "text/javascript";
      mp.async = true;
      mp.src =
        ("https:" == document.location.protocol
          ? "https://jssdkcdns"
          : "http://jssdkcdn") +
        ".mparticle.com/js/v2/" +
        t +
        "/mparticle.js" +
        dbUrl;
      var c = document.getElementsByTagName("script")[0];
      c.parentNode.insertBefore(mp, c);
    })("us2-507e9833f99a4147b356dfaafbf716c9");

    window.mParticle = {
      config: {
        isDevelopmentMode: true,
      },
    };
    var urlParameter = new URLSearchParams(window.location.search);
    var campaignId, affiliateId;
    urlParameter.get("campaignId")
      ? setCampaignId(urlParameter.get("campaignId"))
      : (campaignId = getCookie("campaignId")
        ? getCookie("campaignId")
        : null);
    urlParameter.get("affiliateId")
      ? setAffiliateId(urlParameter.get("affiliateId"))
      : (affiliateId = getCookie("affiliateId")
        ? getCookie("affiliateId")
        : null);
    function setCampaignId(cmId) {
      campaignId = cmId;
      setCookie("campaignId", campaignId);
    }

    function setAffiliateId(afId) {
      affiliateId = afId;
      setCookie("affiliateId", affiliateId);
    }

    function getCookie(name) {
      var value = "; " + document.cookie;
      var parts = value.split("; " + name + "=");
      if (parts.length == 2) return parts.pop().split(";").shift();
    }

    function setCookie(key, value) {
      var expires = new Date();
      expires.setTime(expires.getTime() + 365 * 24 * 60 * 60 * 1000); //1 year
      document.cookie =
        key + "=" + value + ";expires=" + expires.toUTCString();
    }

    var ovontsUserEmail =
      ovontsUserMobile =
      ovontsUserName =
      ovontsUserDob =
      ovontsUserFbId =
      ovontsUserGoogleId =
      ovontsUserGoogleAdId =
      ovontsUserHardwareId =
      null;

    function ovontsSetUserTraits(userObj = null) {

      userObj?.campaignId
        ? (setCookie("ovonts.campaignId", userObj.campaignId),
          (campaignId = userObj.campaignId))
        : getCookie("ovonts.campaignId")
          ? (campaignId = getCookie("ovonts.campaignId"))
          : (campaignId = null);

      userObj?.affiliateId
        ? (setCookie("ovonts.affiliateId", userObj.affiliateId),
          (affiliateId = userObj.affiliateId))
        : getCookie("ovonts.affiliateId")
          ? (affiliateId = getCookie("ovonts.affiliateId"))
          : (affiliateId = null);

      userObj?.email
        ? (setCookie("ovonts.userEmail", userObj.email),
          window.mParticle.Identity.modify({
            userIdentities: { email: userObj?.email },
          }),
          (ovontsUserEmail = userObj.email))
        : getCookie("ovonts.userEmail")
          ? (ovontsUserEmail = getCookie("ovonts.userEmail"))
          : (ovontsUserEmail = null);

      userObj?.mobile_number
        ? (setCookie("ovonts.userMobile", userObj.mobile_number),
          (ovontsUserMobile = userObj.mobile_number))
        : getCookie("ovonts.userMobile")
          ? (ovontsUserMobile = getCookie("ovonts.userMobile"))
          : (ovontsUserMobile = null);

      userObj?.name
        ? (setCookie("ovonts.userName", userObj.name),
          (ovontsUserName = userObj.name))
        : getCookie("ovonts.userName")
          ? (ovontsUserName = getCookie("ovonts.userName"))
          : (ovontsUserName = null);

      userObj?.dob
        ? (setCookie("ovonts.userDob", userObj.dob),
          (ovontsUserDob = userObj.dob))
        : getCookie("ovonts.userDob")
          ? (ovontsUserDob = getCookie("ovonts.userDob"))
          : (ovontsUserDob = null);

      userObj?.fbId
        ? (setCookie("ovonts.userFbId", userObj.fbId),
          (ovontsUserFbId = userObj.fbId))
        : getCookie("ovonts.userFbId")
          ? (ovontsUserFbId = getCookie("ovonts.userFbId"))
          : (ovontsUserFbId = null);

      userObj?.google_id
        ? (setCookie("ovonts.userGoogleId", userObj.google_id),
          (ovontsUserGoogleId = userObj.google_id))
        : getCookie("ovonts.userGoogleId")
          ? (ovontsUserGoogleId = getCookie("ovonts.userGoogleId"))
          : (ovontsUserGoogleId = null);

      userObj?.googleAdId
        ? (setCookie("ovonts.userGoogleAdId", userObj.googleAdId),
          (ovontsUserGoogleAdId = userObj.googleAdId))
        : getCookie("ovonts.userGoogleAdId")
          ? (ovontsUserGoogleAdId = getCookie("ovonts.userGoogleAdId"))
          : (ovontsUserGoogleAdId = null);

      userObj?.hardwareId
        ? (setCookie("ovonts.userHardwareId", userObj.hardwareId),
          (ovontsUserHardwareId = userObj.hardwareId))
        : getCookie("ovonts.userHardwareId")
          ? (ovontsUserHardwareId = getCookie("ovonts.userHardwareId"))
          : (ovontsUserHardwareId = null);
    }
    ovontsSetUserTraits();
  </script>
  <script async src="Ovonts.js"></script>
  <script>
    const product = {
      sku: "32864324",
      title: "Dark yellow lace cut out swing dress",
      desc: "Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing. Sed lectus",
      brand: "ZARA",
      price: "837.00",
      offeredPrice: "837.00",
      currency: "INR",
      category: {
        mainCategory: "Apparel",
        subCategory: "Bottomwear",
        mainSubCategory: "Jeans",
      },
      productUrl:
        "https ://www.eshakti.com/shop/Jeans/High-waist-ankle-skinny-jeans-CL0090916",
      quantity: "1",
      variant: "some variant",
      color: "Yellow",
      size: "M"
    };

    const products = [
      {
        sku: "32864324",
        title: "Dark yellow lace cut out swing dress",
        desc: "Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing. Sed lectus",
        brand: "ZARA",
        price: "837.00",
        offeredPrice: "837.00",
        currency: "INR",
        category: {
          mainCategory: "Apparel",
          subCategory: "Bottomwear",
          mainSubCategory: "Jeans",
        },
        productUrl:
          "https ://www.eshakti.com/shop/Jeans/High-waist-ankle-skinny-jeans-CL0090916",
        quantity: "1",
        variant: "some variant",
        color: "Yellow",
        size: "M"
      },
      {
        sku: "32864324",
        title: "Dark yellow lace cut out swing dress",
        desc: "Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing. Sed lectus",
        brand: "ZARA",
        price: "837.00",
        offeredPrice: "837.00",
        currency: "INR",
        category: {
          mainCategory: "Apparel",
          subCategory: "Bottomwear",
          mainSubCategory: "Jeans",
        },
        productUrl:
          "https ://www.eshakti.com/shop/Jeans/High-waist-ankle-skinny-jeans-CL0090916",
        quantity: "1",
        variant: "some variant",
        color: "Yellow",
        size: "M"
      },
    ];

    const checkoutObj = {
      cartId: "12",
      checkoutId: "123",
      orderId: "12344",
      totalAamount: "2500",
      payableAamount: "1800",
      promoCode: "serddss"
    };

    const orderObj = {
      orderId: "A1001",
      grossAmount: "4000",
      taxableAmount: "400",
      payableAmount: "400",
      totalAmount: "4400",
      transactionId: "U10001",
      offerId: "100001",
      promoApplied: "OFF400"
    };

    const registerObj = {
      email: "subas@gmail.com",
      phone: "9022813986",
      name: "subas",
      age: "24",
      dob: "21/07/1997"
    };

    const loginObj = {
      id: "subas123",
      phone: "9022",
      name: "subhu"
    }

    const cartId = "123";
    const wishlistId = "1234";
  </script>

  <script>
    function handleTraitChange(action) {
      if (action == "campaignId") {
        window.ovontsSetUserTraits({ campaignId: `${document.getElementById("campaignId").value}` })
      }
      if (action == "affiliateId") {
        window.ovontsSetUserTraits({ affiliateId: `${document.getElementById("affiliateId").value}` })
      }
      if (action == "email") {
        window.ovontsSetUserTraits({ email: `${document.getElementById("email").value}` })
      }
      if (action == "mobile_number") {
        window.ovontsSetUserTraits({ mobile_number: `${document.getElementById("phone").value}` })
      }
      if (action == "name") {
        window.ovontsSetUserTraits({ name: `${document.getElementById("name").value}` })
      }
      if (action == "dob") {
        window.ovontsSetUserTraits({ dob: `${document.getElementById("dob").value}` })
      }
      if (action == "fbId") {
        window.ovontsSetUserTraits({ fbId: `${document.getElementById("fid").value}` })
      }
      if (action == "google_id") {
        window.ovontsSetUserTraits({ google_id: `${document.getElementById("gid").value}` })
      }
      if (action == "hardwareId") {
        window.ovontsSetUserTraits({ hardwareId: `${document.getElementById("hid").value}` })
      }

    }

  </script>

</head>

<body>
  <div class="container">
    <div class="container-1">
      <div>
        <input type="text" id="campaignId">
        <button onclick="handleTraitChange('campaignId')" class="button-3">campaignId</button>  <br>
      </div>
      <div>
        <input type="text" id="affiliateId">
        <button onclick="handleTraitChange('affiliateId')" class="button-3">affiliateId</button>  <br>
      </div>
      <div>
        <input type="text" id="email">
        <button onclick="handleTraitChange('email')" id="btn-email" class="button-3">Email</button>  <br>
      </div>
      <div>
        <input type="text" id="phone">
        <button onclick="handleTraitChange('mobile_number')" id="btn-phone" class="button-3">phone</button>  <br>
      </div>
      <div>
        <input type="text" id="name">
        <button onclick="handleTraitChange('name')" id="btn-name" class="button-3">Name</button>  <br>
      </div>
      <div>
        <input type="date" id="dob">
        <button onclick="handleTraitChange('dob')" id="btn-dob" class="button-3">Dob</button>  <br>
      </div>
      <div>
        <input type="text" id="fid">
        <button onclick="handleTraitChange('fbId')" id="btn-fid" class="button-3">FbId</button>  <br>
      </div>
      <div>
        <input type="text" id="gid">
        <button onclick="handleTraitChange('google_id')" id="btn-gid" class="button-3">GoogleId</button>  <br>
      </div>
      <div>
        <input type="text" id="hid">
        <button onclick="handleTraitChange('hardwareId')" id="btn-hid" class="button-3">hardwareId</button>
      </div>
    </div>
    <br>
    <div class="container-2">
      <button class="button-3" role="button" onclick="productViewed(product)">
        productViewed</button><br /><br />
      <button class="button-3" role="button" onclick="productAddedToCart(product,cartId)">
        productAddedToCart</button><br /><br />
      <button class="button-3" role="button" onclick="productAddedToWishlist(wishlistId,product)">
        productAddedToWishlist</button><br /><br />
      <button class="button-3" role="button" onclick="cartViewed(product,cartId)">
        cartViewed</button><br /><br />
      <button class="button-3" role="button" onclick="orderPlaced(products,orderObj)">
        orderPlaced</button><br /><br />
      <button class="button-3" role="button" onclick="checkoutStarted(products,checkoutObj)">
        checkoutStarted</button><br /><br />
      <button class="button-3" role="button" onclick="Register(registerObj)">
        Register</button><br /><br />
      <button class="button-3" role="button" onclick="Login(loginObj)">
        Login</button><br /><br />
    </div>
  </div>
</body>

</html>